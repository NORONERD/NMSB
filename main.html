<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NMSB - No More School Boredom</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
<style>
  /* Reset and base */
  body {
    margin: 0; padding: 0;
    background-color: #0a1128;
    color: #cbd5e1;
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    display: flex; flex-direction: column;
  }
  nav {
    background-color: #001f54;
    padding: 10px 20px;
    display: flex; align-items: center; justify-content: space-between;
    position: sticky; top: 0; z-index: 10;
  }
  nav h1 {
    margin: 0; font-weight: 700; font-size: 1.5rem;
    color: #f0f8ff;
  }
  nav .nav-links {
    display: flex; gap: 20px;
  }
  nav .nav-links a {
    color: #cbd5e1; text-decoration: none;
    font-weight: 600; font-size: 1rem;
  }
  nav .nav-links a:hover {
    color: #65a9ff;
  }
  .search-bar {
    margin-left: 20px;
  }
  .search-bar input {
    padding: 6px 10px;
    border-radius: 5px;
    border: none;
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
  }
  #announcement {
    background-color: #001f54;
    padding: 15px 20px;
    font-style: italic;
    font-size: 1.1rem;
  }
  main {
    flex: 1;
    padding: 20px;
    max-width: 960px;
    margin: 0 auto;
  }
  .game-list {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
    gap: 15px;
  }
  .game-card {
    background: #001f54;
    border-radius: 10px;
    padding: 15px;
    cursor: pointer;
    transition: background 0.3s ease;
    user-select: none;
  }
  .game-card:hover {
    background: #0047ab;
  }
  .game-card h3 {
    margin: 0 0 8px;
    color: #f0f8ff;
  }
  .game-card p {
    margin: 0;
    font-size: 0.9rem;
    color: #a3bffa;
  }
  /* Modal (popup) styles */
  #studyGuideForm {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: rgba(0,0,0,0.75);
    align-items: center; justify-content: center;
    z-index: 9999;
  }
  #studyGuideForm .form-container {
    background-color: #001f54;
    padding: 20px;
    border-radius: 10px;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 0 15px #65a9ff;
  }
  #studyGuideForm label {
    display: block;
    margin-top: 12px;
    font-weight: 600;
  }
  #studyGuideForm input, #studyGuideForm textarea {
    margin-top: 6px;
    width: 100%;
    padding: 8px;
    border-radius: 6px;
    border: none;
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
  }
  #studyGuideForm textarea {
    resize: vertical;
    min-height: 80px;
  }
  #studyGuideForm button {
    margin-top: 15px;
    padding: 10px 15px;
    background-color: #65a9ff;
    border: none;
    border-radius: 6px;
    font-weight: 700;
    color: #001f54;
    cursor: pointer;
  }
  #studyGuideForm button:hover {
    background-color: #4c8be6;
  }
  #studyGuideForm .close-btn {
    background: transparent;
    color: #65a9ff;
    font-weight: 600;
    cursor: pointer;
    border: none;
    font-size: 1.1rem;
  }
</style>
</head>
<body>
<nav>
  <h1>NMSB</h1>
  <div class="nav-links">
    <a href="#" id="showStudyGuideFormBtn">Submit Study Guide</a>
    <a href="#games-section">Games</a>
  </div>
  <div class="search-bar">
    <input type="search" id="gameSearch" placeholder="Search games..." />
  </div>
</nav>

<div id="announcement" aria-live="polite">
  No announcements today.
</div>

<main>
  <section id="games-section" aria-label="Game List">
    <div class="game-list" id="gameList">
      <!-- Games will be inserted here by JS -->
    </div>
  </section>
</main>

<!-- Study Guide Submission Form -->
<div id="studyGuideForm" role="dialog" aria-modal="true" aria-labelledby="formTitle">
  <div class="form-container">
    <button class="close-btn" id="closeFormBtn" aria-label="Close form">&times;</button>
    <h2 id="formTitle">Submit a Study Guide</h2>
    <form id="submitStudyGuideForm">
      <label for="guideTitle">Study Guide Title</label>
      <input type="text" id="guideTitle" name="guideTitle" required />
      <label for="teacherName">Teacher Name</label>
      <input type="text" id="teacherName" name="teacherName" required />
      <label for="yourName">Your Name</label>
      <input type="text" id="yourName" name="yourName" required />
      <label for="testDetails">Test Details</label>
      <textarea id="testDetails" name="testDetails" required></textarea>
      <button type="submit">Submit</button>
    </form>
  </div>
</div>

<script>
  // Game data (based on securly.mom and crazygames links - example placeholders)
  const games = [
    { title: "Fireboy and Watergirl", desc: "Classic puzzle platformer", url: "https://www.crazygames.com/game/fireboy-and-watergirl" },
    { title: "Run 3", desc: "Endless runner in space tunnels", url: "https://www.crazygames.com/game/run-3" },
    { title: "Moto X3M", desc: "Fast-paced bike racing", url: "https://www.crazygames.com/game/moto-x3m" },
    { title: "Agar.io", desc: "Mass-eating multiplayer", url: "https://www.crazygames.com/game/agar-io" },
    { title: "Slope", desc: "3D running and dodging", url: "https://www.crazygames.com/game/slope" },
    // Add more games here
  ];

  // Populate games on page load
  const gameList = document.getElementById('gameList');
  function displayGames(filter = '') {
    gameList.innerHTML = '';
    const filteredGames = games.filter(game =>
      game.title.toLowerCase().includes(filter.toLowerCase())
    );
    if (filteredGames.length === 0) {
      gameList.innerHTML = '<p>No games found.</p>';
      return;
    }
    filteredGames.forEach(game => {
      const card = document.createElement('div');
      card.className = 'game-card';
      card.tabIndex = 0;
      card.setAttribute('role', 'button');
      card.setAttribute('aria-label', `Play ${game.title}`);
      card.innerHTML = `
        <h3>${game.title}</h3>
        <p>${game.desc}</p>
      `;
      card.addEventListener('click', () => openGame(game.url));
      card.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' || e.key === ' ') openGame(game.url);
      });
      gameList.appendChild(card);
    });
  }

  // Open game in new tab + fullscreen attempt
  function openGame(url) {
    // Open new window/tab
    const newWindow = window.open(url, '_blank');
    if (!newWindow) {
      alert('Popup blocked! Please allow popups for this site.');
      return;
    }
    // Try fullscreen on new window (may be blocked by browsers)
    newWindow.onload = () => {
      try {
        newWindow.document.documentElement.requestFullscreen();
      } catch(e) {
        // ignore if not allowed
      }
    };
  }

  // Search input event
  document.getElementById('gameSearch').addEventListener('input', (e) => {
    displayGames(e.target.value);
  });

  displayGames();

  // Show/hide study guide form
  const studyGuideForm = document.getElementById('studyGuideForm');
  document.getElementById('showStudyGuideFormBtn').addEventListener('click', (e) => {
    e.preventDefault();
    studyGuideForm.style.display = 'flex';
  });
  document.getElementById('closeFormBtn').addEventListener('click', () => {
    studyGuideForm.style.display = 'none';
  });
  // Submit study guide form
  document.getElementById('submitStudyGuideForm').addEventListener('submit', (e) => {
    e.preventDefault();
    alert('Thank you for submitting your study guide! (Functionality to store it coming soon)');
    studyGuideForm.style.display = 'none';
    e.target.reset();
  });
</script>
</body>
</html>
